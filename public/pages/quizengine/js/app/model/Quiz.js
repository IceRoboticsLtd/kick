QuizEngine.module("Data",function(e){e.Quiz=Backbone.Model.extend({defaults:{name:"",questions:null},initialize:function(){this.set("questions",new e.QuizQuestions(this.get("questions"))),this.listenTo(this.get("questions"),"change:chosenAnswer",this._transformEvent)},getCurrentQuestion:function(){return this.get("questions").find(function(e){if(e.get("chosenAnswer")===null)return!0})},getCurrentPosition:function(){return this.get("questions").reduce(function(e,t,n){return t.get("chosenAnswer")===null&&e===0?n+1:e},0)},isComplete:function(){return this.get("questions").where({chosenAnswer:null}).length===0},isInProgress:function(){return!this.isComplete()},getScore:function(){return this.isInProgress()?null:Math.round(this.getCorrect()/this.get("questions").length*100)},getCorrect:function(){return this.get("questions").filter(function(e){return e.isCorrect()}).length},toJSON:function(){var e=Backbone.Model.prototype.toJSON.call(this);return e.questions&&e.questions.toJSON&&(e.questions=e.questions.toJSON()),e},_transformEvent:function(e,t){this.trigger("question:answered",e,t),this.isComplete()&&this.trigger("completed")}})});